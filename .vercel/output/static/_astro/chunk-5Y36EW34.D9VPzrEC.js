import{d as x}from"./chunk-TTPTJY6P.F3x2VoRU.js";var z="METHOD_CALLED";function R(e,t){return{event:z,payload:{method:e,...t}}}let u=[],f=0;const d=4;let p=0,h=e=>{let t=[],n={get(){return n.lc||n.listen(()=>{})(),n.value},lc:0,listen(l){return n.lc=t.push(l),()=>{for(let r=f+d;r<u.length;)u[r]===l?u.splice(r,d):r+=d;let i=t.indexOf(l);~i&&(t.splice(i,1),--n.lc||n.off())}},notify(l,i){p++;let r=!u.length;for(let s of t)u.push(s,n.value,l,i);if(r){for(f=0;f<u.length;f+=d)u[f](u[f+1],u[f+2],u[f+3]);u.length=0}},off(){},set(l){let i=n.value;i!==l&&(n.value=l,n.notify(i))},subscribe(l){let i=n.listen(l);return l(n.value),i},value:e};return n};const D=5,c=6,g=10;let C=(e,t,n,l)=>(e.events=e.events||{},e.events[n+g]||(e.events[n+g]=l(i=>{e.events[n].reduceRight((r,s)=>(s(r),r),{shared:{},...i})})),e.events[n]=e.events[n]||[],e.events[n].push(t),()=>{let i=e.events[n],r=i.indexOf(t);i.splice(r,1),i.length||(delete e.events[n],e.events[n+g](),delete e.events[n+g])}),Q=1e3,M=(e,t)=>C(e,l=>{let i=t(l);i&&e.events[c].push(i)},D,l=>{let i=e.listen;e.listen=(...s)=>(!e.lc&&!e.active&&(e.active=!0,l()),i(...s));let r=e.off;return e.events[c]=[],e.off=()=>{r(),setTimeout(()=>{if(e.active&&!e.lc){e.active=!1;for(let s of e.events[c])s();e.events[c]=[]}},Q)},()=>{e.listen=i,e.off=r}}),O=(e,t,n)=>{Array.isArray(e)||(e=[e]);let l,i,r=()=>{if(i===p)return;i=p;let v=e.map(a=>a.get());if(!l||v.some((a,S)=>a!==l[S])){l=v;let a=t(...v);a&&a.then&&a.t?a.then(S=>{l===v&&s.set(S)}):(s.set(a),i=p)}},s=h(void 0),A=s.get;s.get=()=>(r(),A());let U,I=n?()=>{clearTimeout(U),U=setTimeout(r)}:r;return M(s,()=>{let v=e.map(a=>a.listen(I));return r(),()=>{for(let a of v)a()}}),s},o=(e,t)=>O(e,t),$=(e,t)=>O(e,t,!0),_=(e={})=>{let t=h(e);return t.setKey=function(n,l){let i=t.value;typeof l>"u"&&n in t.value?(t.value={...t.value},delete t.value[n],t.notify(i,n)):t.value[n]!==l&&(t.value={...t.value,[n]:l},t.notify(i,n))},t};var m=_({isLoaded:!1,client:void 0,user:void 0,session:void 0,organization:void 0}),H=_(),N=h(null),B=o([m],e=>e.isLoaded),E=$([m,H],(e,t)=>x(e.isLoaded,{session:e.session,user:e.user,organization:e.organization,client:e.client},t)),F=o([E],e=>e.user),G=o([E],e=>e.session),V=o([E],e=>e.organization),T=o([m],e=>e.client),J=o([N],e=>e);o([T],e=>e?.sessions);var q=o([T],e=>e?.signIn),P=o([T],e=>e?.signUp),L=(e,t)=>{M(e,()=>{N.get()?.telemetry?.record(R(t))})};L(q,"$signInStore");L(P,"$signUpStore");L(V,"$organizationStore");export{F as $,G as a,B as b,E as c,N as d,m as e,J as f,H as g};
