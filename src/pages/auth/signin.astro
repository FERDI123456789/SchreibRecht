---
export const prerender = true;

import { SignIn } from "@clerk/astro/components";
import Layout from "../../layouts/Layout.astro";
import { Image, Picture } from "astro:assets";
import learn from "public/learn-1.jpg";
import "../../styles/global.css";
// Custom appearance theme for Clerk that matches the Todo app's style
const clerkAppearance = {
  layout: {
    logoPlacement: "inside",
    logoImageUrl: "",
    showOptionalFields: false,
    socialButtonsPlacement: "bottom",
    socialButtonsVariant: "iconButton",
  },
  variables: {
    colorPrimary: "rgb(124, 58, 237)",
    colorBackground: "rgba(255, 255, 255, 0.1)",
    colorText: "black",
    colorTextSecondary: "rgba(255, 255, 255, 0.8)",
    colorTextOnPrimaryBackground: "white",
    colorInputBackground: "rgba(255, 255, 255, 0.1)",
    colorInputText: "black",
    colorAlphaShade: "rgba(255, 255, 255, 0.1)",
    borderRadius: "0.75rem",
    fontWeight: {
      normal: 400,
      medium: 500,
      bold: 700,
    },
  },
  elements: {
    formButtonPrimary:
      "bg-gradient-to-r from-purple-500 to-black hover:from-purple-600 hover:to-blue-600 text-black font-medium py-2 px-4 rounded-xl transition-all duration-100 hover:scale-[1.02] focus:outline-none focus:ring-2 focus:ring-black/30 active:scale-95 shadow-lg",
    card: "bg-black/10 backdrop-blur-lg rounded-2xl border border-black/20 shadow-2xl",
    headerTitle: "text-black text-2xl font-bold",
    headerSubtitle: "text-black/80",
    socialButtonsBlockButton:
      "border border-black/20 bg-black/10 hover:bg-black/20 text-black hover:scale-[1.02] transition-all duration-100",
    socialButtonsBlockButtonText: "text-black font-medium",
    formFieldLabel: "text-black/90 font-medium",
    formFieldInput:
      "bg-black/20 text-black placeholder-black/60 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-black/30 focus:bg-black/30 transition-all duration-100 border border-black/20",
    footerActionText: "text-black/70",
    footerActionLink: "text-blue-200 hover:text-blue-100 font-medium",
    identityPreviewText: "text-black",
    identityPreviewEditButton: "text-blue-200 hover:text-blue-100",
    formFieldAction: "text-blue-200 hover:text-blue-100",
    formFieldErrorText: "text-red-300",
    dividerLine: "bg-black/20",
    dividerText: "text-black",
    navbar: "hidden", // Hide navbar to match Todo app style
    avatarBox: "border-2 border-black/30",
    logoBox: "text-black",
  },
};
---

<Layout title="Sign In">
  <div
    class="min-h-screen w-full fixed inset-0 flex items-center justify-center"
  >
    <div class="w-full px-4 py-8 flex flex-col items-center">
      <div class="mx-auto">
        <SignIn afterSignInUrl="/schubfach/uebungen" />
      </div>

      <div class="w-full mt-4 text-center">
        <span class="text-black"
          >Allready have an account? <a
            href="/auth/signin"
            class="hover:underline font-bold"
          >
            Sign In</a
          ></span
        >
      </div>
    </div>
    <div
      class="lg:w-48 md:w-28 absolute md:bottom-[20%] right-0 w-16 bottom-32"
    >
      <img
        src="https://assets-global.website-files.com/655eda66dab018e613baf5ff/655f2b28c57aa4c75abf6974_guide-svg4.svg"
        loading="eager"
        width="168"
        alt=""
        class="w-full hover:rotate-3 rounded-full interactive-svg"
      /><img
        src="https://assets-global.website-files.com/655eda66dab018e613baf5ff/655eedbe0ca0432ba7fd096f_guide-svg2.svg"
        loading="eager"
        width="168"
        alt=""
        class="w-full interactive-svg"
      />
    </div>
    <div
      class="md:w-56 w-28 absolute lg:w-96 md:bottom-[20%] md:top-auto left-0 top-0 bottom-auto"
    >
      <img
        src="https://assets-global.website-files.com/655eda66dab018e613baf5ff/655eedbe09e863ce99b749af_guide-svg3.svg"
        loading="eager"
        alt=""
        class="w-full rounded-full interactive-svg"
      />
      <img
        src="https://assets-global.website-files.com/655eda66dab018e613baf5ff/655f2a8686fbbf271f061f15_guide-hero-svg.svg"
        loading="eager"
        alt=""
        class="w-full is-fixed-width lg:w-72 interactive-svg"
      />
    </div>
  </div>
</Layout>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const svgs = document.querySelectorAll(".interactive-svg");
    const maxDistance = 300; // Maximum distance for movement effect
    const sensitivity = 0.1; // Sensitivity for movement

    document.addEventListener("mousemove", (e) => {
      const centerX = window.innerWidth / 2;
      const centerY = window.innerHeight / 2;
      const mouseX = e.clientX;
      const mouseY = e.clientY;

      svgs.forEach((svg) => {
        const rect = svg.getBoundingClientRect();
        const svgX = rect.left + rect.width / 2;
        const svgY = rect.top + rect.height / 2;

        // Calculate vector from SVG to cursor
        const dx = mouseX - svgX;
        const dy = mouseY - svgY;
        const distance = Math.sqrt(dx * dx + dy * dy);

        // Calculate rotation to face cursor
        const angle = Math.atan2(dy, dx) * (180 / Math.PI);
        const normalizedAngle = ((angle + 60) % 180) - 60;

        // Calculate movement away from center based on cursor position
        const centerDx = mouseX - centerX;
        const centerDy = mouseY - centerY;
        const centerDistance = Math.sqrt(
          centerDx * centerDx + centerDy * centerDy
        );
        const moveX =
          (centerDx / centerDistance || 0) *
          Math.min(centerDistance, maxDistance) *
          sensitivity;
        const moveY =
          (centerDy / centerDistance || 0) *
          Math.min(centerDistance, maxDistance) *
          sensitivity;

        // Apply rotation and translation with type assertion
        (svg as HTMLElement).style.transform =
          `rotate(${normalizedAngle * 0.5}deg) translate(${-moveX}px, ${-moveY}px)`;
      });
    });

    // Reset position and rotation when mouse leaves
    document.addEventListener("mouseleave", () => {
      svgs.forEach((svg) => {
        (svg as HTMLElement).style.transform =
          "rotate(0deg) translate(0px, 0px)";
      });
    });
  });
</script>

<style>
  .interactive-svg {
    transition: transform 0.3s ease;
  }

  /* Comprehensive styling for Clerk elements to match Todo app aesthetic */
  .clerk-container {
    --clerk-primary: rgb(124, 58, 237);
    --clerk-primary-hover: rgb(109, 40, 217);
    width: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  /* Make sure the Clerk root box is centered and has consistent width */
  :global(.cl-rootBox) {
    width: 100% !important;
    margin: 0 auto !important;
  }

  /* Force card to be centered */
  :global(.cl-card) {
    margin: 0 auto !important;
    width: 100% !important;
    max-width: 400px !important;
  }

  /* Card styling */
  :global(.cl-card) {
    background: rgba(255, 255, 255, 0.1) !important;
    backdrop-filter: blur(12px) !important;
    border: 1px solid rgba(255, 255, 255, 0.2) !important;
    border-radius: 1rem !important;
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25) !important;
  }

  /* Typography */
  :global(.cl-headerTitle) {
    color: black !important;
    font-weight: 700 !important;
    font-size: 1.5rem !important;
  }

  :global(.cl-headerSubtitle) {
    color: gray !important;
  }

  :global(.cl-footerActionText) {
    color: black !important;
  }

  :global(.cl-footerActionLink) {
    color: black !important;
    font-weight: 500 !important;
  }

  :global(.cl-footerActionLink:hover) {
    color: black !important;
  }

  /* Form fields */
  :global(.cl-formFieldLabel) {
    color: black !important;
    font-weight: 500 !important;
  }

  :global(.cl-formFieldInput) {
    background: rgba(255, 255, 255, 0.1) !important;
    border: 1px solid rgba(255, 255, 255, 0.2) !important;
    border-radius: 0.75rem !important;
    color: black !important;
    padding: 0.75rem 1rem !important;
    transition: all 0.3s !important;
  }

  :global(.cl-formFieldInput:focus) {
    background: rgba(255, 255, 255, 0.2) !important;
    border-color: black !important;
    box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.2) !important;
  }

  :global(.cl-formFieldInput::placeholder) {
    color: rgba(255, 255, 255, 0.6) !important;
  }

  /* Buttons */
  :global(.cl-formButtonPrimary) {
    background: black !important;
    border-radius: 0.75rem !important;
    font-weight: 500 !important;
    padding: 0.75rem 1.5rem !important;
    transition: all 0.3s !important;
    border: none !important;
    box-shadow:
      0 4px 6px -1px rgba(0, 0, 0, 0.1),
      0 2px 4px -1px rgba(0, 0, 0, 0.06) !important;
  }

  :global(.cl-formButtonPrimary:hover) {
    transform: scale(1.02) !important;
    transition: all 0.5s !important;
  }

  :global(.cl-formButtonPrimary:active) {
    transform: scale(0.98) !important;
  }

  /* Social buttons */
  :global(.cl-socialButtonsBlockButton) {
    background: white !important;
    border: 1px solid black !important;
    color: black !important;
    border-radius: 0.75rem !important;
    transition: all 0.3s !important;
    box-shadow:
      0 1px 3px rgba(0, 0, 0, 0.1),
      0 1px 2px rgba(0, 0, 0, 0.06) !important;
  }

  :global(.cl-socialButtonsBlockButton:hover) {
    background: !important;
    border: 1px dashed #94a3b8 !important;
    translate: 0 -1 !important;
    transform: scale(1.05) !important;
    box-shadow:
      0 4px 6px -1px rgba(0, 0, 0, 0.1),
      0 2px 4px -1px rgba(0, 0, 0, 0.06) !important;
  }

  :global(.cl-socialButtonsBlockButton:focus) {
    background: !important;
    border: 1px dashed #94a3b8 !important;
    translate: 0 -1 !important;
    transform: scale(1.05) !important;
    box-shadow:
      0 4px 6px -1px rgba(0, 0, 0, 0.1),
      0 2px 4px -1px rgba(0, 0, 0, 0.06) !important;
  }

  :global(.cl-socialButtonsIconButton) {
    background: white !important;
    border: 1px solid black !important;
    color: black !important;
    transition: all 0.1s !important;
    border-radius: 0.75rem !important;
  }

  :global(.cl-socialButtonsIconButton:hover) {
    background: rgba(255, 255, 255, 0.9) !important;
    border: none !important;
    transform: scale(1.05) !important;
  }

  :global(.cl-socialButtonsIconButton svg),
  :global(.cl-socialButtonsBlockButton svg) {
    color: black !important;
  }

  /* Divider */
  :global(.cl-dividerText) {
    color: black !important;
  }

  :global(.cl-dividerLine) {
    background-color: rgba(255, 255, 255, 0.2) !important;
  }

  /* Error messages */
  :global(.cl-formFieldError) {
    color: red !important;
  }

  /* Spinner */
  :global(.cl-spinner) {
    border-color: rgba(255, 255, 255, 0.15) !important;
    border-top-color: black !important;
  }

  /* Other internal components */
  :global(.cl-internal-b3fm6y) {
    background: rgba(255, 255, 255, 0.1) !important;
    border: 1px solid rgba(255, 255, 255, 0.2) !important;
    border-radius: 0.75rem !important;
  }

  /* HIDE ALL BRANDING & LOGOS */
  :global(.cl-logo),
  :global(.cl-logo *),
  :global(.cl-powered-by),
  :global(.cl-powered-by-clerk),
  :global(.cl-badge),
  :global(.cl-powered-by-logo),
  :global([class*="clerk-powered"]),
  :global([class*="powered-by"]),
  :global([class*="tailwind"]),
  :global([class*="logo-"]),
  :global([data-logo]),
  :global([class*="-logo"]) {
    display: none !important;
    opacity: 0 !important;
    visibility: hidden !important;
    width: 0 !important;
    height: 0 !important;
    position: absolute !important;
    overflow: hidden !important;
    pointer-events: none !important;
  }

  /* Hide any potential branding in navbar */
  :global(.cl-navbar),
  :global(.cl-footer) {
    display: none !important;
  }

  /* Additional selectors for any brand references */
  :global([class*="brand"]),
  :global([class*="logo"]),
  :global([data-brand]),
  :global([data-cl-brand]) {
    display: none !important;
  }
</style>
